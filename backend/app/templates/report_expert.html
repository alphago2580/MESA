{% extends "base.html" %}

{% block summary_icon %}ğŸ“ˆ{% endblock %}

{% block extra_styles %}
  /* ì „ë¬¸ê°€ ë ˆë²¨: ë°ì´í„° ë°€ë„ ë†’ìŒ, ê°„ê²°í•˜ê³  ê¸°ìˆ ì  */
  .section-content { font-size: 13px; line-height: 1.7; }
  .section { padding: 16px 20px; }

  /* ë°ì´í„° í…Œì´ë¸” */
  .data-table {
    width: 100%;
    border-collapse: collapse;
    margin: 12px 0;
    font-size: 12px;
  }
  .data-table th {
    text-align: left;
    padding: 8px 10px;
    border-bottom: 2px solid #333;
    color: #888;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-size: 11px;
  }
  .data-table td {
    padding: 6px 10px;
    border-bottom: 1px solid #1e1e1e;
    color: #ccc;
  }
  .data-table tr:hover td { background: rgba(156, 39, 176, 0.05); }
  .data-table .num { text-align: right; font-variant-numeric: tabular-nums; }

  /* ì •ëŸ‰ ë°ì´í„° ê°•ì¡° */
  .quant-box {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 8px;
    margin: 12px 0;
  }
  .quant-item {
    background: #141414;
    border: 1px solid #222;
    border-radius: 6px;
    padding: 10px;
    text-align: center;
  }
  .quant-item .label { font-size: 10px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; }
  .quant-item .val { font-size: 18px; font-weight: 700; color: white; margin-top: 2px; font-variant-numeric: tabular-nums; }

  /* ë¦¬ìŠ¤í¬ ë§¤íŠ¸ë¦­ìŠ¤ */
  .risk-matrix {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin: 12px 0;
  }
  .risk-item {
    background: #141414;
    border-radius: 6px;
    padding: 10px 12px;
    border-left: 3px solid;
  }
  .risk-item.high { border-left-color: #ef5350; }
  .risk-item.medium { border-left-color: #FF9800; }
  .risk-item.low { border-left-color: #26a69a; }
  .risk-item .risk-label { font-size: 10px; color: #888; text-transform: uppercase; margin-bottom: 2px; }
  .risk-item .risk-desc { font-size: 12px; color: #ccc; }

  /* ì§€í‘œ ì¹´ë“œ: ë” ì»´íŒ©íŠ¸í•˜ê²Œ */
  .indicators-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 8px; }
  .indicator-card { padding: 10px 12px; }
  .indicator-card .name { font-size: 11px; }
  .indicator-card .value { font-size: 18px; }

  /* ê¸°ìˆ ì  ì°¸ì¡° */
  .tech-note {
    background: rgba(156, 39, 176, 0.06);
    border: 1px solid rgba(156, 39, 176, 0.15);
    border-radius: 6px;
    padding: 8px 12px;
    margin: 8px 0;
    font-size: 12px;
    color: #999;
  }
  .tech-note::before {
    content: "REF";
    display: inline-block;
    background: #9C27B0;
    color: white;
    font-size: 9px;
    font-weight: 700;
    padding: 1px 5px;
    border-radius: 3px;
    margin-right: 6px;
  }

  @media print {
    .data-table th { border-bottom-color: #999; }
    .data-table td { border-bottom-color: #ddd; }
  }

  @media (prefers-color-scheme: light) {
    .data-table th { border-bottom-color: #ddd; color: #666; }
    .data-table td { border-bottom-color: #eee; color: #333; }
    .data-table tr:hover td { background: rgba(156, 39, 176, 0.03); }
    .quant-item { background: #f8f8f8; border-color: #e0e0e0; }
    .quant-item .val { color: #111; }
    .risk-item { background: #f8f8f8; }
    .risk-item .risk-desc { color: #444; }
    .tech-note { background: rgba(156, 39, 176, 0.03); border-color: rgba(156, 39, 176, 0.1); }
  }
{% endblock %}

{% block after_sections %}
  {% if raw_data_table %}
  <div class="section">
    <h2>ë¶€ë¡: ì›ì‹œ ë°ì´í„°</h2>
    <table class="data-table">
      <thead>
        <tr>
          <th>ì§€í‘œ</th>
          <th class="num">í˜„ì¬ê°’</th>
          <th class="num">ë³€ë™(%)</th>
          <th>ê¸°ì¤€ì¼</th>
        </tr>
      </thead>
      <tbody>
        {% for row in raw_data_table %}
        <tr>
          <td>{{ row.name }}</td>
          <td class="num">{{ row.value }}</td>
          <td class="num {{ 'up' if row.change_pct and row.change_pct > 0 else 'down' }}">
            {{ "%.2f"|format(row.change_pct) if row.change_pct is not none else "-" }}%
          </td>
          <td>{{ row.date }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}
{% endblock %}
